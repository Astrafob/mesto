(()=>{"use strict";const t={formSelector:".popup__edit-form",inputSelector:".popup__input-text",submitButtonSelector:".popup__save-button",inactiveButtonClass:"popup__save-button-type-inactive",inputErrorBorderClass:"popup__input-text_type_error",inputErrorClass:"popup__input-error",errorClass:"popup__input-error_visible"};class e{constructor(t,e,s){this._title=t.name,this._link=t.link,this._templateSelector=e,this._imageClickHendler=s}_createCardElement(){return document.querySelector(this._templateSelector).content.querySelector(".card").cloneNode(!0)}_setData(){const t=this._newCard.querySelector(".card__image"),e=this._newCard.querySelector(".card__title");t.alt=this._title,t.src=this._link,e.textContent=this._title}_deleteCard(){this._newCard.remove(),this._newCard=null}_toggleLike(t){t.target.classList.toggle("card__button-like_active")}_setEventListeners(){this._newCard.querySelector(".card__delete").addEventListener("click",(()=>{this._deleteCard()})),this._newCard.querySelector(".card__button-like").addEventListener("click",(t=>{this._toggleLike(t)})),this._newCard.querySelector(".card__image").addEventListener("click",(()=>{this._imageClickHendler(this._title,this._link)}))}getCard(){return this._newCard=this._createCardElement(),this._setData(),this._setEventListeners(),this._newCard}}class s{constructor(t,e){this._formSelector=t.formSelector,this._inputSelector=t.inputSelector,this._submitButtonSelector=t.submitButtonSelector,this._inactiveButtonClass=t.inactiveButtonClass,this._inputErrorBorderClass=t.inputErrorBorderClass,this._inputErrorClass=t.inputErrorClass,this._errorClass=t.errorClass,this._form=e,this._inputList=Array.from(e.querySelectorAll(this._inputSelector)),this._buttonElement=this._form.querySelector(this._submitButtonSelector)}_showInputError(t){const e=this._form.querySelector(`.${t.id}-error`);e.classList.add(this._errorClass),e.textContent=t.validationMessage,t.classList.add(this._inputErrorBorderClass)}_hideInputError(t){const e=this._form.querySelector(`.${t.id}-error`);e.classList.remove(this._errorClass),e.textContent="",t.classList.remove(this._inputErrorBorderClass)}_checkInputValidity(t){t.validity.valid?this._hideInputError(t):this._showInputError(t)}_hasInvalidInput(t){return t.some((t=>!t.validity.valid))}_toggleButtonState(){this._hasInvalidInput(this._inputList)?(this._buttonElement.classList.add(this._inactiveButtonClass),this._buttonElement.disabled=!0):(this._buttonElement.classList.remove(this._inactiveButtonClass),this._buttonElement.disabled=!1)}_setEventListeners(){this._toggleButtonState(),this._form.addEventListener("reset",(()=>{setTimeout((()=>{this._toggleButtonState()}),0)})),this._inputList.forEach((t=>{t.addEventListener("input",(()=>{this._checkInputValidity(t),this._toggleButtonState()}))}))}resetValidation(){this._toggleButtonState(),this._buttonElement.disabled=!0,this._inputList.forEach((t=>{this._hideInputError(t)}))}enableValidation(){this._form.addEventListener("submit",(function(t){t.preventDefault()})),this._setEventListeners()}}class r{constructor(t){this._popup=t,this._handleEscClose=this._handleEscClose.bind(this)}open(){this._popup.classList.add("popup_opened"),document.addEventListener("keydown",this._handleEscClose)}close(){this._popup.classList.remove("popup_opened"),document.removeEventListener("keydown",this._handleEscClose)}_handleEscClose(t){"Escape"===t.key&&this.close()}setEventListeners(){this._popup.addEventListener("click",(t=>{(t.target.classList.contains("popup_opened")||t.target.classList.contains("popup__close-button"))&&this.close()}))}}class i extends r{constructor(t,e){super(t),this._callbackSubmitForm=e,this._elementForm=this._popup.querySelector(".popup__edit-form"),this._inputList=this._popup.querySelectorAll(".popup__input-text")}_getInputValues(){return this._inputValues={},this._inputList.forEach((t=>{this._inputValues[t.name]=t.value})),this._inputValues}setEventListeners(){super.setEventListeners(),this._elementForm.addEventListener("submit",(t=>{t.preventDefault(),this._objectInputs=this._getInputValues(),this._callbackSubmitForm(this._objectInputs),this.close()}))}close(){super.close(),this._elementForm.reset()}}const n=document.querySelector("#popupEditProfile"),o=document.querySelector("#popupAddCard"),a=document.querySelector("#popupViewPhoto"),l=document.querySelector(".profile"),p=document.querySelector(".cards"),c=l.querySelector(".button_edit_open"),u=l.querySelector(".button_add_open"),_=l.querySelector(".profile__title"),d=l.querySelector(".profile__subtitle"),h=n.querySelector("#nameVisitor"),m=n.querySelector("#jobVisitor"),v=new s(t,n),E=new s(t,o),C=new class{constructor({items:t,renderer:e},s){this._container=s,this._items=t,this._renderer=e}rendererItems(){this._items.forEach((t=>{this._renderer(t)}))}addItem(t){this._container.prepend(t)}}({items:[{name:"Архыз",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/arkhyz.jpg"},{name:"Челябинская область",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/chelyabinsk-oblast.jpg"},{name:"Иваново",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/ivanovo.jpg"},{name:"Камчатка",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kamchatka.jpg"},{name:"Холмогорский район",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/kholmogorsky-rayon.jpg"},{name:"Байкал",link:"https://pictures.s3.yandex.net/frontend-developer/cards-compressed/baikal.jpg"}],renderer:t=>{C.addItem(k(t))}},p),b=new class extends r{constructor(t){super(t),this._popupImage=t.querySelector(".popup__image"),this._popupCaptionImage=t.querySelector(".popup__caption-image")}open(t,e){this._popupImage.src=e,this._popupImage.alt=t,this._popupCaptionImage.textContent=t,super.open()}}(a),y=new i(n,(function(t){g.setUserInfo(t)})),S=new i(o,(function(t){C.addItem(k(t))})),g=new class{constructor({nameVisitor:t,jobVisitor:e}){this._nameVisitor=t,this._jobVisitor=e}getUserInfo(){return{name:this._nameVisitor.textContent,job:this._jobVisitor.textContent}}setUserInfo(t){this._data=t,this._nameVisitor.textContent=this._data.name,this._jobVisitor.textContent=this._data.job}}({nameVisitor:_,jobVisitor:d}),L=(t,e)=>{b.open(t,e)},k=t=>(console.log(t),new e(t,"#card",L).getCard());c.addEventListener("click",(()=>{const t=g.getUserInfo();h.value=t.name,m.value=t.job,y.open()})),u.addEventListener("click",(()=>{S.open()})),v.enableValidation(),E.enableValidation(),C.rendererItems(),y.setEventListeners(),S.setEventListeners(),b.setEventListeners()})();
//# sourceMappingURL=data:application/json;charset=utf-8;base64,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Li9zcmMvY29tcG9uZW50cy9DYXJkLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1BvcHVwLmpzIiwid2VicGFjazovL21lc3RvLy4vc3JjL2NvbXBvbmVudHMvUG9wdXBXaXRoRm9ybS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9wYWdlcy9pbmRleC5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1NlY3Rpb24uanMiLCJ3ZWJwYWNrOi8vbWVzdG8vLi9zcmMvY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyIsIndlYnBhY2s6Ly9tZXN0by8uL3NyYy9jb21wb25lbnRzL1VzZXJJbmZvLmpzIl0sInNvdXJjZXNDb250ZW50IjpbImV4cG9ydCBjb25zdCB2YWxpZGF0aW9uQ29uZmlnID0ge1xyXG4gIGZvcm1TZWxlY3RvcjogJy5wb3B1cF9fZWRpdC1mb3JtJyxcclxuICBpbnB1dFNlbGVjdG9yOiAnLnBvcHVwX19pbnB1dC10ZXh0JyxcclxuICBzdWJtaXRCdXR0b25TZWxlY3RvcjogJy5wb3B1cF9fc2F2ZS1idXR0b24nLFxyXG4gIGluYWN0aXZlQnV0dG9uQ2xhc3M6ICdwb3B1cF9fc2F2ZS1idXR0b24tdHlwZS1pbmFjdGl2ZScsXHJcbiAgaW5wdXRFcnJvckJvcmRlckNsYXNzOiAncG9wdXBfX2lucHV0LXRleHRfdHlwZV9lcnJvcicsXHJcbiAgaW5wdXRFcnJvckNsYXNzOiAncG9wdXBfX2lucHV0LWVycm9yJyxcclxuICBlcnJvckNsYXNzOiAncG9wdXBfX2lucHV0LWVycm9yX3Zpc2libGUnXHJcbn07XHJcblxyXG5leHBvcnQgY29uc3QgaW5pdGlhbENhcmRzID0gW1xyXG4gIHtcclxuICAgIG5hbWU6ICfQkNGA0YXRi9C3JyxcclxuICAgIGxpbms6ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQvYXJraHl6LmpwZydcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6ICfQp9C10LvRj9Cx0LjQvdGB0LrQsNGPINC+0LHQu9Cw0YHRgtGMJyxcclxuICAgIGxpbms6ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQvY2hlbHlhYmluc2stb2JsYXN0LmpwZydcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6ICfQmNCy0LDQvdC+0LLQvicsXHJcbiAgICBsaW5rOiAnaHR0cHM6Ly9waWN0dXJlcy5zMy55YW5kZXgubmV0L2Zyb250ZW5kLWRldmVsb3Blci9jYXJkcy1jb21wcmVzc2VkL2l2YW5vdm8uanBnJ1xyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogJ9Ca0LDQvNGH0LDRgtC60LAnLFxyXG4gICAgbGluazogJ2h0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9rYW1jaGF0a2EuanBnJ1xyXG4gIH0sXHJcbiAge1xyXG4gICAgbmFtZTogJ9Cl0L7Qu9C80L7Qs9C+0YDRgdC60LjQuSDRgNCw0LnQvtC9JyxcclxuICAgIGxpbms6ICdodHRwczovL3BpY3R1cmVzLnMzLnlhbmRleC5uZXQvZnJvbnRlbmQtZGV2ZWxvcGVyL2NhcmRzLWNvbXByZXNzZWQva2hvbG1vZ29yc2t5LXJheW9uLmpwZydcclxuICB9LFxyXG4gIHtcclxuICAgIG5hbWU6ICfQkdCw0LnQutCw0LsnLFxyXG4gICAgbGluazogJ2h0dHBzOi8vcGljdHVyZXMuczMueWFuZGV4Lm5ldC9mcm9udGVuZC1kZXZlbG9wZXIvY2FyZHMtY29tcHJlc3NlZC9iYWlrYWwuanBnJ1xyXG4gIH1cclxuXTsiLCJleHBvcnQgY2xhc3MgQ2FyZCB7XHJcbiAgY29uc3RydWN0b3IgKGRhdGFDYXJkLCB0ZW1wbGF0ZVNlbGVjdG9yLCBoYW5kbGVDYXJkQ2xpY2spIHtcclxuICAgIHRoaXMuX3RpdGxlID0gZGF0YUNhcmQubmFtZTtcclxuICAgIHRoaXMuX2xpbmsgPSBkYXRhQ2FyZC5saW5rO1xyXG4gICAgdGhpcy5fdGVtcGxhdGVTZWxlY3RvciA9IHRlbXBsYXRlU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9pbWFnZUNsaWNrSGVuZGxlciA9IGhhbmRsZUNhcmRDbGljaztcclxuICB9XHJcblxyXG4gIF9jcmVhdGVDYXJkRWxlbWVudCgpIHtcclxuICAgIGNvbnN0IGNhcmRFbGVtZW50ID0gZG9jdW1lbnRcclxuICAgIC5xdWVyeVNlbGVjdG9yKHRoaXMuX3RlbXBsYXRlU2VsZWN0b3IpXHJcbiAgICAuY29udGVudFxyXG4gICAgLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkJylcclxuICAgIC5jbG9uZU5vZGUodHJ1ZSk7XHJcbiAgICBcclxuICAgIHJldHVybiBjYXJkRWxlbWVudDtcclxuICB9XHJcblxyXG4gIF9zZXREYXRhKCkge1xyXG4gICAgY29uc3QgY2FyZEltYWdlID0gdGhpcy5fbmV3Q2FyZC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9faW1hZ2UnKTtcclxuICAgIGNvbnN0IGNhcmRUaXRsZSA9dGhpcy5fbmV3Q2FyZC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fdGl0bGUnKTtcclxuICAgIFxyXG4gICAgY2FyZEltYWdlLmFsdCA9IHRoaXMuX3RpdGxlO1xyXG4gICAgY2FyZEltYWdlLnNyYyA9IHRoaXMuX2xpbms7XHJcbiAgICBjYXJkVGl0bGUudGV4dENvbnRlbnQgPSB0aGlzLl90aXRsZTtcclxuICB9XHJcblxyXG4gIF9kZWxldGVDYXJkKCkge1xyXG4gICAgdGhpcy5fbmV3Q2FyZC5yZW1vdmUoKTtcclxuICAgIHRoaXMuX25ld0NhcmQgPSBudWxsO1xyXG4gIH1cclxuXHJcbiAgX3RvZ2dsZUxpa2UoZXZlbnQpIHtcclxuICAgIGV2ZW50LnRhcmdldC5jbGFzc0xpc3QudG9nZ2xlKCdjYXJkX19idXR0b24tbGlrZV9hY3RpdmUnKTtcclxuICB9XHJcblxyXG4gIF9zZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIGNvbnN0IGRlbGV0ZUJ1dHRvbiA9IHRoaXMuX25ld0NhcmQucXVlcnlTZWxlY3RvcignLmNhcmRfX2RlbGV0ZScpO1xyXG4gICAgZGVsZXRlQnV0dG9uLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9kZWxldGVDYXJkKCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBjb25zdCBsaWtlQnV0dG9uID0gdGhpcy5fbmV3Q2FyZC5xdWVyeVNlbGVjdG9yKCcuY2FyZF9fYnV0dG9uLWxpa2UnKTtcclxuICAgIGxpa2VCdXR0b24uYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoZXZlbnQpID0+IHtcclxuICAgICAgdGhpcy5fdG9nZ2xlTGlrZShldmVudCk7XHJcbiAgICB9KTtcclxuXHJcbiAgICBjb25zdCB2aWV3SW1hZ2UgPSB0aGlzLl9uZXdDYXJkLnF1ZXJ5U2VsZWN0b3IoJy5jYXJkX19pbWFnZScpO1xyXG4gICAgdmlld0ltYWdlLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKCkgPT4ge1xyXG4gICAgICB0aGlzLl9pbWFnZUNsaWNrSGVuZGxlcih0aGlzLl90aXRsZSwgdGhpcy5fbGluayk7XHJcbiAgICB9KTtcclxuXHJcbiAgfVxyXG5cclxuICBnZXRDYXJkKCkge1xyXG4gICAgdGhpcy5fbmV3Q2FyZCA9IHRoaXMuX2NyZWF0ZUNhcmRFbGVtZW50KCk7XHJcbiAgICB0aGlzLl9zZXREYXRhKCk7XHJcbiAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG5cclxuICAgIHJldHVybiB0aGlzLl9uZXdDYXJkO1xyXG4gIH1cclxuXHJcbn0iLCJleHBvcnQgY2xhc3MgRm9ybVZhbGlkYXRvciB7XHJcbiAgY29uc3RydWN0b3IgKGNvbmZpZywgZm9ybUVsZW1lbnQpIHtcclxuICAgIHRoaXMuX2Zvcm1TZWxlY3RvciA9IGNvbmZpZy5mb3JtU2VsZWN0b3I7XHJcbiAgICB0aGlzLl9pbnB1dFNlbGVjdG9yID0gY29uZmlnLmlucHV0U2VsZWN0b3I7XHJcbiAgICB0aGlzLl9zdWJtaXRCdXR0b25TZWxlY3RvciA9IGNvbmZpZy5zdWJtaXRCdXR0b25TZWxlY3RvcjtcclxuICAgIHRoaXMuX2luYWN0aXZlQnV0dG9uQ2xhc3MgPSBjb25maWcuaW5hY3RpdmVCdXR0b25DbGFzcztcclxuICAgIHRoaXMuX2lucHV0RXJyb3JCb3JkZXJDbGFzcyA9IGNvbmZpZy5pbnB1dEVycm9yQm9yZGVyQ2xhc3M7XHJcbiAgICB0aGlzLl9pbnB1dEVycm9yQ2xhc3MgPSBjb25maWcuaW5wdXRFcnJvckNsYXNzO1xyXG4gICAgdGhpcy5fZXJyb3JDbGFzcyA9IGNvbmZpZy5lcnJvckNsYXNzO1xyXG4gICAgdGhpcy5fZm9ybSA9IGZvcm1FbGVtZW50O1xyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gQXJyYXkuZnJvbShmb3JtRWxlbWVudC5xdWVyeVNlbGVjdG9yQWxsKHRoaXMuX2lucHV0U2VsZWN0b3IpKTtcclxuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQgPSB0aGlzLl9mb3JtLnF1ZXJ5U2VsZWN0b3IodGhpcy5fc3VibWl0QnV0dG9uU2VsZWN0b3IpO1xyXG4gIH1cclxuXHJcbiAgX3Nob3dJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XHJcblxyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSBpbnB1dEVsZW1lbnQudmFsaWRhdGlvbk1lc3NhZ2U7XHJcbiAgICBpbnB1dEVsZW1lbnQuY2xhc3NMaXN0LmFkZCh0aGlzLl9pbnB1dEVycm9yQm9yZGVyQ2xhc3MpO1xyXG4gIH1cclxuXHJcbiAgX2hpZGVJbnB1dEVycm9yKGlucHV0RWxlbWVudCkge1xyXG4gICAgY29uc3QgZXJyb3JFbGVtZW50ID0gdGhpcy5fZm9ybS5xdWVyeVNlbGVjdG9yKGAuJHtpbnB1dEVsZW1lbnQuaWR9LWVycm9yYCk7XHJcblxyXG4gICAgZXJyb3JFbGVtZW50LmNsYXNzTGlzdC5yZW1vdmUodGhpcy5fZXJyb3JDbGFzcyk7XHJcbiAgICBlcnJvckVsZW1lbnQudGV4dENvbnRlbnQgPSAnJztcclxuICAgIGlucHV0RWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKHRoaXMuX2lucHV0RXJyb3JCb3JkZXJDbGFzcyk7XHJcbiAgfVxyXG5cclxuICBfY2hlY2tJbnB1dFZhbGlkaXR5KGlucHV0RWxlbWVudCkge1xyXG4gICAgaWYgKGlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZCkge1xyXG5cclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuXHJcbiAgICB9IGVsc2Uge1xyXG5cclxuICAgICAgdGhpcy5fc2hvd0lucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH1cclxuICB9XHJcblxyXG4gIF9oYXNJbnZhbGlkSW5wdXQoaW5wdXRMaXN0KSB7XHJcbiAgICByZXR1cm4gaW5wdXRMaXN0LnNvbWUoKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICByZXR1cm4gIWlucHV0RWxlbWVudC52YWxpZGl0eS52YWxpZDtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgX3RvZ2dsZUJ1dHRvblN0YXRlKCkge1xyXG4gICAgaWYgKHRoaXMuX2hhc0ludmFsaWRJbnB1dCh0aGlzLl9pbnB1dExpc3QpKSB7XHJcblxyXG4gICAgICB0aGlzLl9idXR0b25FbGVtZW50LmNsYXNzTGlzdC5hZGQodGhpcy5faW5hY3RpdmVCdXR0b25DbGFzcyk7XHJcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xyXG4gICAgfSBlbHNlIHtcclxuXHJcbiAgICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuY2xhc3NMaXN0LnJlbW92ZSh0aGlzLl9pbmFjdGl2ZUJ1dHRvbkNsYXNzKTtcclxuICAgICAgdGhpcy5fYnV0dG9uRWxlbWVudC5kaXNhYmxlZCA9IGZhbHNlO1xyXG4gICAgfVxyXG4gIH1cclxuXHJcbiAgX3NldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICBcclxuICAgIHRoaXMuX2Zvcm0uYWRkRXZlbnRMaXN0ZW5lcigncmVzZXQnLCAoKSA9PiB7XHJcbiAgICAgIHNldFRpbWVvdXQoKCkgPT4ge1xyXG4gICAgICAgIHRoaXMuX3RvZ2dsZUJ1dHRvblN0YXRlKCk7XHJcbiAgICAgIH0sIDApO1xyXG4gICAgfSk7XHJcbiAgXHJcbiAgICB0aGlzLl9pbnB1dExpc3QuZm9yRWFjaCgoaW5wdXRFbGVtZW50KSA9PiB7XHJcbiAgICAgIGlucHV0RWxlbWVudC5hZGRFdmVudExpc3RlbmVyKCdpbnB1dCcsICgpID0+IHtcclxuICAgICAgICB0aGlzLl9jaGVja0lucHV0VmFsaWRpdHkoaW5wdXRFbGVtZW50KTtcclxuICAgICAgICB0aGlzLl90b2dnbGVCdXR0b25TdGF0ZSgpO1xyXG4gICAgICB9KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgcmVzZXRWYWxpZGF0aW9uKCkge1xyXG4gICAgdGhpcy5fdG9nZ2xlQnV0dG9uU3RhdGUoKTtcclxuICAgIHRoaXMuX2J1dHRvbkVsZW1lbnQuZGlzYWJsZWQgPSB0cnVlO1xyXG5cclxuICAgIHRoaXMuX2lucHV0TGlzdC5mb3JFYWNoKChpbnB1dEVsZW1lbnQpID0+IHtcclxuICAgICAgdGhpcy5faGlkZUlucHV0RXJyb3IoaW5wdXRFbGVtZW50KTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgZW5hYmxlVmFsaWRhdGlvbigpIHtcclxuICAgICAgdGhpcy5fZm9ybS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBmdW5jdGlvbiAoZXZ0KSB7XHJcbiAgICAgICAgZXZ0LnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgIH0pO1xyXG4gIFxyXG4gICAgICB0aGlzLl9zZXRFdmVudExpc3RlbmVycygpO1xyXG4gIH1cclxuICBcclxufSIsImV4cG9ydCBjbGFzcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgdGhpcy5fcG9wdXAgPSBwb3B1cFNlbGVjdG9yO1xyXG4gICAgdGhpcy5faGFuZGxlRXNjQ2xvc2UgPSB0aGlzLl9oYW5kbGVFc2NDbG9zZS5iaW5kKHRoaXMpO1xyXG4gIH1cclxuXHJcbiAgb3BlbigpIHtcclxuICAgIHRoaXMuX3BvcHVwLmNsYXNzTGlzdC5hZGQoJ3BvcHVwX29wZW5lZCcpO1xyXG4gICAgZG9jdW1lbnQuYWRkRXZlbnRMaXN0ZW5lcigna2V5ZG93bicsIHRoaXMuX2hhbmRsZUVzY0Nsb3NlKTtcclxuICB9XHJcblxyXG4gIGNsb3NlKCkge1xyXG4gICAgdGhpcy5fcG9wdXAuY2xhc3NMaXN0LnJlbW92ZSgncG9wdXBfb3BlbmVkJyk7XHJcbiAgICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgdGhpcy5faGFuZGxlRXNjQ2xvc2UpO1xyXG4gIH1cclxuXHJcbiAgX2hhbmRsZUVzY0Nsb3NlKGV2ZW50KSB7XHJcbiAgICBpZiAoZXZlbnQua2V5ID09PSAnRXNjYXBlJykge1xyXG4gICAgICB0aGlzLmNsb3NlKCk7XHJcbiAgICB9XHJcbiAgfVxyXG5cclxuICBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAgIHRoaXMuX3BvcHVwLmFkZEV2ZW50TGlzdGVuZXIoJ2NsaWNrJywgKGV2ZW50KSA9PiB7XHJcbiAgICAgIGlmIChcclxuICAgICAgICBldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwb3B1cF9vcGVuZWQnKSB8fCBcclxuICAgICAgICBldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwb3B1cF9fY2xvc2UtYnV0dG9uJylcclxuICAgICAgKSB7XHJcbiAgICAgICAgdGhpcy5jbG9zZSgpO1xyXG4gICAgICB9XHJcbiAgICB9KTtcclxuICB9XHJcbn0iLCJpbXBvcnQgeyBQb3B1cCB9IGZyb20gXCIuL1BvcHVwXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgUG9wdXBXaXRoRm9ybSBleHRlbmRzIFBvcHVwIHtcclxuICBjb25zdHJ1Y3Rvcihwb3B1cFNlbGVjdG9yLCBjYWxsYmFja1N1Ym1pdEZvcm0pIHtcclxuICAgIHN1cGVyKHBvcHVwU2VsZWN0b3IpO1xyXG4gICAgdGhpcy5fY2FsbGJhY2tTdWJtaXRGb3JtID0gY2FsbGJhY2tTdWJtaXRGb3JtO1xyXG4gICAgdGhpcy5fZWxlbWVudEZvcm0gPSB0aGlzLl9wb3B1cC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2VkaXQtZm9ybScpO1xyXG4gICAgdGhpcy5faW5wdXRMaXN0ID0gdGhpcy5fcG9wdXAucXVlcnlTZWxlY3RvckFsbCgnLnBvcHVwX19pbnB1dC10ZXh0Jyk7XHJcbiAgfVxyXG5cclxuICBfZ2V0SW5wdXRWYWx1ZXMoKSB7XHJcbiAgICB0aGlzLl9pbnB1dFZhbHVlcyA9IHt9O1xyXG4gICAgdGhpcy5faW5wdXRMaXN0LmZvckVhY2goKGlucHV0RWxlbWVudCkgPT4ge1xyXG4gICAgICB0aGlzLl9pbnB1dFZhbHVlc1tpbnB1dEVsZW1lbnQubmFtZV0gPSBpbnB1dEVsZW1lbnQudmFsdWU7XHJcbiAgICB9KTtcclxuICAgIHJldHVybiB0aGlzLl9pbnB1dFZhbHVlcztcclxuICB9XHJcbiAgXHJcblxyXG4gIHNldEV2ZW50TGlzdGVuZXJzKCkge1xyXG4gICAgc3VwZXIuc2V0RXZlbnRMaXN0ZW5lcnMoKTtcclxuICAgIHRoaXMuX2VsZW1lbnRGb3JtLmFkZEV2ZW50TGlzdGVuZXIoJ3N1Ym1pdCcsIChldmVudCkgPT4ge1xyXG4gICAgICBldmVudC5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICB0aGlzLl9vYmplY3RJbnB1dHMgPSB0aGlzLl9nZXRJbnB1dFZhbHVlcygpO1xyXG4gICAgICB0aGlzLl9jYWxsYmFja1N1Ym1pdEZvcm0odGhpcy5fb2JqZWN0SW5wdXRzKTtcclxuXHJcbiAgICAgIHRoaXMuY2xvc2UoKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgY2xvc2UoKSB7XHJcbiAgICBzdXBlci5jbG9zZSgpO1xyXG4gICAgdGhpcy5fZWxlbWVudEZvcm0ucmVzZXQoKTtcclxuICB9XHJcbn0iLCJpbXBvcnQgeyB2YWxpZGF0aW9uQ29uZmlnLCBpbml0aWFsQ2FyZHMgfSBmcm9tICcuLi91dGlscy9jb25zdGFudHMuanMnO1xyXG5pbXBvcnQgeyBDYXJkIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvQ2FyZC5qc1wiO1xyXG5pbXBvcnQgeyBGb3JtVmFsaWRhdG9yIH0gZnJvbSBcIi4uL2NvbXBvbmVudHMvRm9ybVZhbGlkYXRvci5qc1wiO1xyXG5pbXBvcnQgJy4vaW5kZXguY3NzJztcclxuXHJcbmltcG9ydCBTZWN0aW9uIGZyb20gJy4uL2NvbXBvbmVudHMvU2VjdGlvbi5qcyc7XHJcbmltcG9ydCB7IFBvcHVwV2l0aEltYWdlIH0gZnJvbSAnLi4vY29tcG9uZW50cy9Qb3B1cFdpdGhJbWFnZS5qcyc7XHJcbmltcG9ydCB7IFBvcHVwV2l0aEZvcm0gfSBmcm9tICcuLi9jb21wb25lbnRzL1BvcHVwV2l0aEZvcm0uanMnO1xyXG5pbXBvcnQgVXNlckluZm8gZnJvbSAnLi4vY29tcG9uZW50cy9Vc2VySW5mby5qcyc7XHJcblxyXG4vLyBjb25zdCBwb3B1cHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yQWxsKCcucG9wdXAnKTtcclxuY29uc3QgcG9wdXBFZGl0UHJvZmlsZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwb3B1cEVkaXRQcm9maWxlJyk7XHJcbmNvbnN0IHBvcHVwQWRkQ2FyZCA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwb3B1cEFkZENhcmQnKTtcclxuY29uc3QgcG9wdXBJbWFnZSA9IGRvY3VtZW50LnF1ZXJ5U2VsZWN0b3IoJyNwb3B1cFZpZXdQaG90bycpO1xyXG5jb25zdCBwcm9maWxlID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnByb2ZpbGUnKTtcclxuY29uc3QgY2FyZHMgPSBkb2N1bWVudC5xdWVyeVNlbGVjdG9yKCcuY2FyZHMnKTtcclxuXHJcbmNvbnN0IGJ1dHRvblByb2ZpbGVFZGl0ID0gcHJvZmlsZS5xdWVyeVNlbGVjdG9yKCcuYnV0dG9uX2VkaXRfb3BlbicpO1xyXG5jb25zdCBidXR0b25BZGRDYXJkID0gcHJvZmlsZS5xdWVyeVNlbGVjdG9yKCcuYnV0dG9uX2FkZF9vcGVuJyk7XHJcbmNvbnN0IHByb2ZpbGVOYW1lID0gcHJvZmlsZS5xdWVyeVNlbGVjdG9yKCcucHJvZmlsZV9fdGl0bGUnKTtcclxuY29uc3QgcHJvZmlsZUpvYiA9IHByb2ZpbGUucXVlcnlTZWxlY3RvcignLnByb2ZpbGVfX3N1YnRpdGxlJyk7XHJcblxyXG4vLyBjb25zdCBmb3JtUHJvZmlsZSA9IHBvcHVwRWRpdFByb2ZpbGUucXVlcnlTZWxlY3RvcignLnBvcHVwX19lZGl0LWZvcm0nKTtcclxuY29uc3QgbmFtZUltcHV0ID0gcG9wdXBFZGl0UHJvZmlsZS5xdWVyeVNlbGVjdG9yKCcjbmFtZVZpc2l0b3InKTtcclxuY29uc3Qgam9iSW5wdXQgPSBwb3B1cEVkaXRQcm9maWxlLnF1ZXJ5U2VsZWN0b3IoJyNqb2JWaXNpdG9yJyk7XHJcblxyXG4vLyBjb25zdCBmb3JtQWRkQ2FyZCA9IHBvcHVwQWRkQ2FyZC5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2VkaXQtZm9ybScpO1xyXG4vLyBjb25zdCBwbGFjZU5hbWUgPSBwb3B1cEFkZENhcmQucXVlcnlTZWxlY3RvcignI3BsYWNlTmFtZScpO1xyXG4vLyBjb25zdCBwbGFjZVBob3RvVVJMID0gcG9wdXBBZGRDYXJkLnF1ZXJ5U2VsZWN0b3IoJyNwbGFjZVBob3RvVVJMJyk7XHJcblxyXG4vLyBjb25zdCBwaG90byA9IHBvcHVwSW1hZ2UucXVlcnlTZWxlY3RvcignaW1nJyk7XHJcbi8vIGNvbnN0IGNhcHRpb24gPSBwb3B1cEltYWdlLnF1ZXJ5U2VsZWN0b3IoJy5wb3B1cF9fY2FwdGlvbi1pbWFnZScpO1xyXG5cclxuY29uc3QgcG9wdXBFZGl0UHJvZmlsZVZhbGlkYXRpb24gPSBuZXcgRm9ybVZhbGlkYXRvcih2YWxpZGF0aW9uQ29uZmlnLCBwb3B1cEVkaXRQcm9maWxlKTtcclxuY29uc3QgcG9wdXBBZGRDYXJkVmFsaWRhdGlvbiA9IG5ldyBGb3JtVmFsaWRhdG9yKHZhbGlkYXRpb25Db25maWcsIHBvcHVwQWRkQ2FyZCk7XHJcbmNvbnN0IGRlZmF1bHRTZWN0aW9uID0gbmV3IFNlY3Rpb24oeyBcclxuICBpdGVtczogaW5pdGlhbENhcmRzLCBcclxuICByZW5kZXJlcjogKGl0ZW0pID0+IHsgXHJcbiAgICBkZWZhdWx0U2VjdGlvbi5hZGRJdGVtKGNyZWF0ZUNhcmQoaXRlbSkpO1xyXG4gIH0gXHJcbn0sIGNhcmRzKTtcclxuY29uc3QgcG9wdXBXaXRoSW1hZ2UgPSBuZXcgUG9wdXBXaXRoSW1hZ2UocG9wdXBJbWFnZSk7XHJcbmNvbnN0IHBvcHVwUHJvZmlsZSA9IG5ldyBQb3B1cFdpdGhGb3JtKHBvcHVwRWRpdFByb2ZpbGUsIGhhbmRsZVN1Ym1pdEVkaXRQcm9maWxlKTtcclxuY29uc3QgcG9wdXBBZGRDYXJkRWxlbWVudCA9IG5ldyBQb3B1cFdpdGhGb3JtKHBvcHVwQWRkQ2FyZCwgaGFuZGxlU3VibWl0QWRkQ2FyZCk7XHJcbmNvbnN0IHVzZXJJbmZvID0gbmV3IFVzZXJJbmZvKCB7bmFtZVZpc2l0b3I6IHByb2ZpbGVOYW1lLCBqb2JWaXNpdG9yOiBwcm9maWxlSm9ifSApO1xyXG5cclxuY29uc3Qgb3BlblBvcHVwV2l0aEltYWdlID0gKHRpdGxlLCBsaW5rKSA9PiB7XHJcbiAgcG9wdXBXaXRoSW1hZ2Uub3Blbih0aXRsZSwgbGluayk7XHJcbn07XHJcblxyXG5jb25zdCBjcmVhdGVDYXJkID0gKGRhdGFDYXJkKSA9PiB7XHJcbiAgY29uc29sZS5sb2coZGF0YUNhcmQpO1xyXG4gIGNvbnN0IGNhcmQgPSBuZXcgQ2FyZChkYXRhQ2FyZCwgJyNjYXJkJywgb3BlblBvcHVwV2l0aEltYWdlKTtcclxuICBjb25zdCBjYXJkRWxlbWVudCA9IGNhcmQuZ2V0Q2FyZCgpO1xyXG4gIHJldHVybiBjYXJkRWxlbWVudDtcclxufTtcclxuXHJcbmZ1bmN0aW9uIGhhbmRsZVN1Ym1pdEVkaXRQcm9maWxlKG9iamVjdElucHV0cykge1xyXG4gIHVzZXJJbmZvLnNldFVzZXJJbmZvKG9iamVjdElucHV0cyk7XHJcbn1cclxuXHJcbmZ1bmN0aW9uIGhhbmRsZVN1Ym1pdEFkZENhcmQob2JqZWN0SW5wdXRzKSB7XHJcbiAgZGVmYXVsdFNlY3Rpb24uYWRkSXRlbShjcmVhdGVDYXJkKG9iamVjdElucHV0cykpO1xyXG59XHJcblxyXG5idXR0b25Qcm9maWxlRWRpdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsICgpID0+IHtcclxuICBjb25zdCB1c2VyRGF0YSA9IHVzZXJJbmZvLmdldFVzZXJJbmZvKCk7XHJcbiAgbmFtZUltcHV0LnZhbHVlID0gdXNlckRhdGEubmFtZTtcclxuICBqb2JJbnB1dC52YWx1ZSA9IHVzZXJEYXRhLmpvYjtcclxuICBwb3B1cFByb2ZpbGUub3BlbigpO1xyXG59KTtcclxuXHJcbmJ1dHRvbkFkZENhcmQuYWRkRXZlbnRMaXN0ZW5lcignY2xpY2snLCAoKSA9PiB7XHJcbiAgcG9wdXBBZGRDYXJkRWxlbWVudC5vcGVuKCk7XHJcbn0pO1xyXG5cclxucG9wdXBFZGl0UHJvZmlsZVZhbGlkYXRpb24uZW5hYmxlVmFsaWRhdGlvbigpOyAvLyDQn9C+0LTQutC70Y7Rh9Cw0LXQvCDQstCw0LvQuNC00LDRhtC40Y5cclxucG9wdXBBZGRDYXJkVmFsaWRhdGlvbi5lbmFibGVWYWxpZGF0aW9uKCk7XHJcblxyXG5kZWZhdWx0U2VjdGlvbi5yZW5kZXJlckl0ZW1zKCk7IC8vINCg0LXQvdC00LXRgNC40Lwg0YjQsNCx0LvQvtC90L3Ri9C1INC60LDRgNGC0L7Rh9C60LhcclxuXHJcbi8vINGA0LDRgdC60LjQtNGL0LLQsNC10Lwg0YHQu9GD0YjQsNGC0LXQu9C4XHJcbnBvcHVwUHJvZmlsZS5zZXRFdmVudExpc3RlbmVycygpO1xyXG5wb3B1cEFkZENhcmRFbGVtZW50LnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbnBvcHVwV2l0aEltYWdlLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcblxyXG4vLyBjb25zdCBoYW5kbGVDYXJkQ3JlYXRlID0gKGRhdGFDYXJkKSA9PiB7XHJcbi8vICAgY2FyZHMucHJlcGVuZChjcmVhdGVDYXJkKGRhdGFDYXJkKSk7XHJcbi8vIH07XHJcblxyXG4vLyAvLyDQoNC10L3QtNC10YAg0YjQsNCx0LvQvtC90LAg0LrQsNGA0YLQvtGH0LXQulxyXG4vLyBjb25zdCBjcmVhdGVDYXJkcyA9ICgpID0+IHtcclxuLy8gICBpbml0aWFsQ2FyZHMuZm9yRWFjaCgoZGF0YUNhcmQpID0+IHtcclxuLy8gICAgIGhhbmRsZUNhcmRDcmVhdGUoZGF0YUNhcmQpO1xyXG4vLyAgIH0pO1xyXG4vLyB9O1xyXG4vLyBjcmVhdGVDYXJkcygpO1xyXG5cclxuXHJcbi8vIC8vINCk0YPQvdC60YbQuNGPINC+0YLQutGA0YvRgtC40Y8g0L/QvtC/0LDQv9CwXHJcbi8vIGZ1bmN0aW9uIG9wZW5Qb3B1cChtb2RhbEVsZW1lbnQpIHtcclxuLy8gICBjb25zdCBwb3B1cCA9IG1vZGFsRWxlbWVudC5jbG9zZXN0KCcucG9wdXAnKTtcclxuLy8gICBkb2N1bWVudC5hZGRFdmVudExpc3RlbmVyKCdrZXlkb3duJywgY2xvc2VQb3B1cE9uRXNjKTtcclxuLy8gICBwb3B1cC5jbGFzc0xpc3QuYWRkKCdwb3B1cF9vcGVuZWQnKTtcclxuLy8gfVxyXG5cclxuLy8gLy8g0KTRg9C90LrRhtC40Y8g0LfQsNC60YDRi9GC0LjRjyDQv9C+0L/QsNC/0LBcclxuLy8gZnVuY3Rpb24gY2xvc2VQb3B1cChtb2RhbEVsZW1lbnQpIHtcclxuLy8gICBjb25zdCBwb3B1cCA9IG1vZGFsRWxlbWVudC5jbG9zZXN0KCcucG9wdXAnKTtcclxuLy8gICBkb2N1bWVudC5yZW1vdmVFdmVudExpc3RlbmVyKCdrZXlkb3duJywgY2xvc2VQb3B1cE9uRXNjKTtcclxuLy8gICBwb3B1cC5jbGFzc0xpc3QucmVtb3ZlKCdwb3B1cF9vcGVuZWQnKTtcclxuLy8gfVxyXG5cclxuLy8gLy/QntGC0LrRgNGL0YLQuNC1INC/0L7Qvy3QsNC/0LAgXCLRgNC10LTQsNC60YLQvtGAINC/0YDQvtGE0LjQu9GPXCJcclxuLy8gZnVuY3Rpb24gb3BlblBvcHVwRWRpdFByb2ZpbGUoKSB7XHJcblxyXG4vLyAgIG5hbWVJbXB1dC52YWx1ZSA9IHByb2ZpbGVOYW1lLnRleHRDb250ZW50O1xyXG4vLyAgIGpvYklucHV0LnZhbHVlID0gcHJvZmlsZUpvYi50ZXh0Q29udGVudDtcclxuXHJcbi8vICAgb3BlblBvcHVwKHBvcHVwRWRpdFByb2ZpbGUpO1xyXG4vLyB9XHJcblxyXG4vLyAvL9Ce0YLQutGA0YvRgtC40LUg0L/QvtC/LdCw0L/QsCBcItC00L7QsdCw0LLQu9C10L3QuNC1INC60LDRgNGC0L7Rh9C60LhcIlxyXG4vLyBmdW5jdGlvbiBvcGVuUG9wdXBBZGRDYXJkKCkge1xyXG4vLyAgIGZvcm1BZGRDYXJkLnJlc2V0KCk7XHJcblxyXG4vLyAgIHBvcHVwQWRkQ2FyZFZhbGlkYXRpb24ucmVzZXRWYWxpZGF0aW9uKCk7XHJcblxyXG4vLyAgIG9wZW5Qb3B1cChwb3B1cEFkZENhcmQpO1xyXG4vLyB9XHJcblxyXG4vLyAvLyDQl9Cw0LrRgNGL0YLQuNC1INC/0L7Qvy3QsNC/0LAg0L/QviDQutC90L7Qv9C60LUgJ0VTQydcclxuLy8gY29uc3QgY2xvc2VQb3B1cE9uRXNjID0gKGV2ZW50KSA9PiB7XHJcbi8vICAgaWYgKGV2ZW50LmtleSA9PT0gJ0VzY2FwZScpIHtcclxuLy8gICAgIGNvbnN0IG9wZW5lZFBvcHVwID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvcignLnBvcHVwX29wZW5lZCcpO1xyXG4vLyAgICAgY2xvc2VQb3B1cChvcGVuZWRQb3B1cCk7XHJcbi8vICAgfVxyXG4vLyB9O1xyXG5cclxuLy8g0JfQsNC60YDRi9GC0LjQtSDQstGB0LXRhSDQv9C+0L/QsNC/0L7QsiDQvdCwINC60YDQtdGB0YLQuNC6INC40LvQuCDRh9C10YDQtdC3INC60LvQuNC6INC90LAg0L7QstC10YDQu9C10LlcclxuLy8gcG9wdXBzLmZvckVhY2goKHBvcHVwKSA9PiB7XHJcbi8vICAgICBwb3B1cC5hZGRFdmVudExpc3RlbmVyKCdtb3VzZWRvd24nLCAoZXZlbnQpID0+IHtcclxuLy8gICAgICAgICBpZiAoZXZlbnQudGFyZ2V0LmNsYXNzTGlzdC5jb250YWlucygncG9wdXBfb3BlbmVkJykpIHtcclxuLy8gICAgICAgICAgICAgY2xvc2VQb3B1cChwb3B1cCk7XHJcbi8vICAgICAgICAgfVxyXG4vLyAgICAgICAgIGlmIChldmVudC50YXJnZXQuY2xhc3NMaXN0LmNvbnRhaW5zKCdwb3B1cF9fY2xvc2UtYnV0dG9uJykpIHtcclxuLy8gICAgICAgICAgIGNsb3NlUG9wdXAocG9wdXApO1xyXG4vLyAgICAgICAgIH1cclxuLy8gICAgIH0pO1xyXG4vLyB9KTtcclxuXHJcbi8vIC8vINCe0YLQutGA0YvRgtC40LUg0L/QvtC/LdCw0L/QsCBcItC/0YDQvtGB0LzQvtGC0YAg0YTQvtGC0L5cIlxyXG5cclxuLy8gY29uc3QgaGFuZGxlQ2FyZENsaWNrID0gKHRpdGxlLCBsaW5rKSA9PiB7XHJcbi8vICAgcGhvdG8uc3JjID0gbGluaztcclxuLy8gICBwaG90by5hbHQgPSB0aXRsZTtcclxuLy8gICBjYXB0aW9uLnRleHRDb250ZW50ID0gdGl0bGU7XHJcblxyXG4vLyAgIG9wZW5Qb3B1cChwb3B1cEltYWdlKTtcclxuLy8gfTtcclxuXHJcbi8vIC8v0L/QtdGA0LXQvdC+0YEg0LfQvdCw0YfQtdC90LjQuSDRhNC+0YDQvNGLINC90LAg0YHRgtGA0LDQvdC40YbRg1xyXG4vLyBmdW5jdGlvbiBoYW5kbGVQcm9maWxlRm9ybVN1Ym1pdChldmVudCkge1xyXG4vLyAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4vLyAgIHByb2ZpbGVOYW1lLnRleHRDb250ZW50ID0gbmFtZUltcHV0LnZhbHVlO1xyXG4vLyAgIHByb2ZpbGVKb2IudGV4dENvbnRlbnQgPSBqb2JJbnB1dC52YWx1ZTtcclxuXHJcbi8vICAgY2xvc2VQb3B1cChwb3B1cEVkaXRQcm9maWxlKTtcclxuLy8gfVxyXG5cclxuLy8gLy8g0JTQvtCx0LDQstC70LXQvdC40LUg0L3QvtCy0L7QuSDQutCw0YDRgtC+0YfQutC4INGBINC/0L7QvNC+0YnRjNGOINGE0L7RgNC80YtcclxuLy8gZnVuY3Rpb24gY3JlYXRlTmV3Q2FyZChldmVudCkge1xyXG4vLyAgIGV2ZW50LnByZXZlbnREZWZhdWx0KCk7XHJcblxyXG4vLyAgIGNvbnN0IGNhcmQgPSB7fTtcclxuXHJcbi8vICAgY2FyZC5uYW1lID0gcGxhY2VOYW1lLnZhbHVlO1xyXG4vLyAgIGNhcmQubGluayA9IHBsYWNlUGhvdG9VUkwudmFsdWU7XHJcblxyXG4vLyAgIGhhbmRsZUNhcmRDcmVhdGUoY2FyZCk7XHJcblxyXG4vLyAgIGZvcm1BZGRDYXJkLnJlc2V0KCk7XHJcblxyXG4vLyAgIGNsb3NlUG9wdXAocG9wdXBBZGRDYXJkKTtcclxuLy8gfVxyXG5cclxuXHJcblxyXG4vLyBmb3JtUHJvZmlsZS5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBoYW5kbGVQcm9maWxlRm9ybVN1Ym1pdCk7ICAvL9Ch0LvRg9GI0LDRgtC10LvRjCDRhNC+0YDQvNGLIFwi0YDQtdC00LDQutGC0L7RgCDQv9GA0L7RhNC40LvRj1wiXHJcblxyXG4vLyBmb3JtQWRkQ2FyZC5hZGRFdmVudExpc3RlbmVyKCdzdWJtaXQnLCBjcmVhdGVOZXdDYXJkKTsgLy/QodC70YPRiNCw0YLQtdC70Ywg0YTQvtGA0LzRiyBcItGB0L7Qt9C00LDQvdC40LUg0LrQsNGA0YLQvtGH0LrQuFwiXHJcblxyXG4vLyBidXR0b25Qcm9maWxlRWRpdC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9wZW5Qb3B1cEVkaXRQcm9maWxlKTsgIC8v0KHQu9GD0YjQsNGC0LXQu9GMINC60L3QvtC/0LrQuCBcItGA0LXQtNCw0LrRgtC+0YAg0L/RgNC+0YTQuNC70Y9cIlxyXG5cclxuLy8gYnV0dG9uQWRkQ2FyZC5hZGRFdmVudExpc3RlbmVyKCdjbGljaycsIG9wZW5Qb3B1cEFkZENhcmQpOyAgLy/QodC70YPRiNCw0YLQtdC70Ywg0LrQvdC+0L/QutC4IFwi0LTQvtCx0LDQstC70LXQvdC40LUg0LrQsNGA0YLQvtGH0LrQuFwiIiwiZXhwb3J0IGRlZmF1bHQgY2xhc3MgU2VjdGlvbiB7XHJcbiAgY29uc3RydWN0b3IoeyBpdGVtcywgcmVuZGVyZXIgfSwgY29udGFpbmVyU2VsZWN0b3IpIHtcclxuICAgIHRoaXMuX2NvbnRhaW5lciA9IGNvbnRhaW5lclNlbGVjdG9yO1xyXG4gICAgdGhpcy5faXRlbXMgPSBpdGVtcztcclxuICAgIHRoaXMuX3JlbmRlcmVyID0gcmVuZGVyZXI7XHJcbiAgfVxyXG5cclxuICByZW5kZXJlckl0ZW1zKCkge1xyXG4gICAgdGhpcy5faXRlbXMuZm9yRWFjaCgoaXRlbSkgPT4ge1xyXG4gICAgICB0aGlzLl9yZW5kZXJlcihpdGVtKTtcclxuICAgIH0pO1xyXG4gIH1cclxuXHJcbiAgYWRkSXRlbShlbGVtZW50KSB7XHJcbiAgICB0aGlzLl9jb250YWluZXIucHJlcGVuZChlbGVtZW50KTtcclxuICB9XHJcbn0iLCJpbXBvcnQgeyBQb3B1cCB9IGZyb20gXCIuL1BvcHVwXCI7XHJcblxyXG5leHBvcnQgY2xhc3MgUG9wdXBXaXRoSW1hZ2UgZXh0ZW5kcyBQb3B1cCB7XHJcbiAgY29uc3RydWN0b3IocG9wdXBTZWxlY3Rvcikge1xyXG4gICAgc3VwZXIocG9wdXBTZWxlY3Rvcik7XHJcbiAgICB0aGlzLl9wb3B1cEltYWdlID0gcG9wdXBTZWxlY3Rvci5xdWVyeVNlbGVjdG9yKCcucG9wdXBfX2ltYWdlJyk7XHJcbiAgICB0aGlzLl9wb3B1cENhcHRpb25JbWFnZSA9IHBvcHVwU2VsZWN0b3IucXVlcnlTZWxlY3RvcignLnBvcHVwX19jYXB0aW9uLWltYWdlJyk7XHJcbiAgfVxyXG5cclxuICBvcGVuKHRpdGxlLCBsaW5rKSB7XHJcbiAgICB0aGlzLl9wb3B1cEltYWdlLnNyYyA9IGxpbms7XHJcbiAgICB0aGlzLl9wb3B1cEltYWdlLmFsdCA9IHRpdGxlO1xyXG4gICAgdGhpcy5fcG9wdXBDYXB0aW9uSW1hZ2UudGV4dENvbnRlbnQgPSB0aXRsZTtcclxuXHJcbiAgICBzdXBlci5vcGVuKCk7XHJcbiAgfVxyXG5cclxuICAvLyBjbG9zZSgpIHtcclxuICAvLyAgIHN1cGVyLmNsb3NlKCk7XHJcbiAgLy8gfVxyXG5cclxuICAvLyBzZXRFdmVudExpc3RlbmVycygpIHtcclxuICAvLyAgIHN1cGVyLnNldEV2ZW50TGlzdGVuZXJzKCk7XHJcbiAgLy8gfVxyXG5cclxufSIsImV4cG9ydCBkZWZhdWx0IGNsYXNzIFVzZXJJbmZvIHtcclxuICBjb25zdHJ1Y3Rvcigge25hbWVWaXNpdG9yLCBqb2JWaXNpdG9yfSApIHtcclxuICAgIHRoaXMuX25hbWVWaXNpdG9yID0gbmFtZVZpc2l0b3I7XHJcbiAgICB0aGlzLl9qb2JWaXNpdG9yID0gam9iVmlzaXRvcjtcclxuICB9XHJcblxyXG4gIGdldFVzZXJJbmZvKCkge1xyXG4gICAgcmV0dXJuIHtcclxuICAgICAgbmFtZTogdGhpcy5fbmFtZVZpc2l0b3IudGV4dENvbnRlbnQsXHJcbiAgICAgIGpvYjogdGhpcy5fam9iVmlzaXRvci50ZXh0Q29udGVudFxyXG4gICAgfTsgIFxyXG4gIH1cclxuXHJcbiAgc2V0VXNlckluZm8oZGF0YSkge1xyXG4gICAgdGhpcy5fZGF0YSA9IGRhdGE7XHJcbiAgICB0aGlzLl9uYW1lVmlzaXRvci50ZXh0Q29udGVudCA9IHRoaXMuX2RhdGEubmFtZTtcclxuICAgIHRoaXMuX2pvYlZpc2l0b3IudGV4dENvbnRlbnQgPSB0aGlzLl9kYXRhLmpvYjsgICBcclxuICB9XHJcbn0iXSwibmFtZXMiOlsidmFsaWRhdGlvbkNvbmZpZyIsImZvcm1TZWxlY3RvciIsImlucHV0U2VsZWN0b3IiLCJzdWJtaXRCdXR0b25TZWxlY3RvciIsImluYWN0aXZlQnV0dG9uQ2xhc3MiLCJpbnB1dEVycm9yQm9yZGVyQ2xhc3MiLCJpbnB1dEVycm9yQ2xhc3MiLCJlcnJvckNsYXNzIiwiQ2FyZCIsImNvbnN0cnVjdG9yIiwiZGF0YUNhcmQiLCJ0ZW1wbGF0ZVNlbGVjdG9yIiwiaGFuZGxlQ2FyZENsaWNrIiwidGhpcyIsIl90aXRsZSIsIm5hbWUiLCJfbGluayIsImxpbmsiLCJfdGVtcGxhdGVTZWxlY3RvciIsIl9pbWFnZUNsaWNrSGVuZGxlciIsIl9jcmVhdGVDYXJkRWxlbWVudCIsImRvY3VtZW50IiwicXVlcnlTZWxlY3RvciIsImNvbnRlbnQiLCJjbG9uZU5vZGUiLCJfc2V0RGF0YSIsImNhcmRJbWFnZSIsIl9uZXdDYXJkIiwiY2FyZFRpdGxlIiwiYWx0Iiwic3JjIiwidGV4dENvbnRlbnQiLCJfZGVsZXRlQ2FyZCIsInJlbW92ZSIsIl90b2dnbGVMaWtlIiwiZXZlbnQiLCJ0YXJnZXQiLCJjbGFzc0xpc3QiLCJ0b2dnbGUiLCJfc2V0RXZlbnRMaXN0ZW5lcnMiLCJhZGRFdmVudExpc3RlbmVyIiwiZ2V0Q2FyZCIsIkZvcm1WYWxpZGF0b3IiLCJjb25maWciLCJmb3JtRWxlbWVudCIsIl9mb3JtU2VsZWN0b3IiLCJfaW5wdXRTZWxlY3RvciIsIl9zdWJtaXRCdXR0b25TZWxlY3RvciIsIl9pbmFjdGl2ZUJ1dHRvbkNsYXNzIiwiX2lucHV0RXJyb3JCb3JkZXJDbGFzcyIsIl9pbnB1dEVycm9yQ2xhc3MiLCJfZXJyb3JDbGFzcyIsIl9mb3JtIiwiX2lucHV0TGlzdCIsIkFycmF5IiwiZnJvbSIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJfYnV0dG9uRWxlbWVudCIsIl9zaG93SW5wdXRFcnJvciIsImlucHV0RWxlbWVudCIsImVycm9yRWxlbWVudCIsImlkIiwiYWRkIiwidmFsaWRhdGlvbk1lc3NhZ2UiLCJfaGlkZUlucHV0RXJyb3IiLCJfY2hlY2tJbnB1dFZhbGlkaXR5IiwidmFsaWRpdHkiLCJ2YWxpZCIsIl9oYXNJbnZhbGlkSW5wdXQiLCJpbnB1dExpc3QiLCJzb21lIiwiX3RvZ2dsZUJ1dHRvblN0YXRlIiwiZGlzYWJsZWQiLCJzZXRUaW1lb3V0IiwiZm9yRWFjaCIsInJlc2V0VmFsaWRhdGlvbiIsImVuYWJsZVZhbGlkYXRpb24iLCJldnQiLCJwcmV2ZW50RGVmYXVsdCIsIlBvcHVwIiwicG9wdXBTZWxlY3RvciIsIl9wb3B1cCIsIl9oYW5kbGVFc2NDbG9zZSIsImJpbmQiLCJvcGVuIiwiY2xvc2UiLCJyZW1vdmVFdmVudExpc3RlbmVyIiwia2V5Iiwic2V0RXZlbnRMaXN0ZW5lcnMiLCJjb250YWlucyIsIlBvcHVwV2l0aEZvcm0iLCJjYWxsYmFja1N1Ym1pdEZvcm0iLCJzdXBlciIsIl9jYWxsYmFja1N1Ym1pdEZvcm0iLCJfZWxlbWVudEZvcm0iLCJfZ2V0SW5wdXRWYWx1ZXMiLCJfaW5wdXRWYWx1ZXMiLCJ2YWx1ZSIsIl9vYmplY3RJbnB1dHMiLCJyZXNldCIsInBvcHVwRWRpdFByb2ZpbGUiLCJwb3B1cEFkZENhcmQiLCJwb3B1cEltYWdlIiwicHJvZmlsZSIsImNhcmRzIiwiYnV0dG9uUHJvZmlsZUVkaXQiLCJidXR0b25BZGRDYXJkIiwicHJvZmlsZU5hbWUiLCJwcm9maWxlSm9iIiwibmFtZUltcHV0Iiwiam9iSW5wdXQiLCJwb3B1cEVkaXRQcm9maWxlVmFsaWRhdGlvbiIsInBvcHVwQWRkQ2FyZFZhbGlkYXRpb24iLCJkZWZhdWx0U2VjdGlvbiIsIml0ZW1zIiwicmVuZGVyZXIiLCJjb250YWluZXJTZWxlY3RvciIsIl9jb250YWluZXIiLCJfaXRlbXMiLCJfcmVuZGVyZXIiLCJyZW5kZXJlckl0ZW1zIiwiaXRlbSIsImFkZEl0ZW0iLCJlbGVtZW50IiwicHJlcGVuZCIsImNyZWF0ZUNhcmQiLCJwb3B1cFdpdGhJbWFnZSIsIl9wb3B1cEltYWdlIiwiX3BvcHVwQ2FwdGlvbkltYWdlIiwidGl0bGUiLCJwb3B1cFByb2ZpbGUiLCJvYmplY3RJbnB1dHMiLCJ1c2VySW5mbyIsInNldFVzZXJJbmZvIiwicG9wdXBBZGRDYXJkRWxlbWVudCIsIm5hbWVWaXNpdG9yIiwiam9iVmlzaXRvciIsIl9uYW1lVmlzaXRvciIsIl9qb2JWaXNpdG9yIiwiZ2V0VXNlckluZm8iLCJqb2IiLCJkYXRhIiwiX2RhdGEiLCJvcGVuUG9wdXBXaXRoSW1hZ2UiLCJjb25zb2xlIiwibG9nIiwidXNlckRhdGEiXSwic291cmNlUm9vdCI6IiJ9